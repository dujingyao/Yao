
### 题目要求：
建立关于车辆通行的数学模型，研究小区开放对周边道路通行的影响。    
#### 模型目标：
基于第一题的**主成分分析**（PCA）和**层次分析法**（AHP）结果，构建**综合交通影响评估模型**，量化小区开放对周边道路通行的影响。    
#### 核心目标：
通过第一题的权重向量和指标数据，计算开放前后交通状态的综合评价指数（CTI）。验证小区开放政策的交通优化效果，输出可解释的改进率。   
### 模型框架：
##### 1.综合交通指数公式(CTI):
$$CTI=\sum^9_{i=1}w_i\cdot M_i^*$$其中，$w_i$是第i个指标的权重，$M_i^*$是第i个指标的标准化值   
##### 2.标准化公式：
效益型指标（越大越好）：
$$M_i^*=\frac{M_i-min(M_i)}{max(M_i)-min(M_i)}$$
成本型指标（越小越好）：
$$M_i^*=1-\frac{M_i-min(M_i)}{max(M_i)-min(M_i)}$$
变化率计算：
$$变化率=\frac{CTI_{开放后}-CTI_{开放前}}{CTI_{开放前}}\times100\%$$
关键参数：   
交通流量($M_1$),，行程车速($M_2$)、饱和度($M_3$)、非直线系数($M_4$)、路网密度($M_5$)、TCI($M_6$)、运行指数($M_7$)、应急恢复时间($M_8$)、应急成本($M_9$)    
```
% ========== 输入数据 ==========

% 平衡车辆分布（对应交通流量 M₁）

data_opens = [116; 117; 116]; % 3场景 × 1指标

% 道路限速（Km/h）（对应行程车速 M₂）

speed_opens = [100; 100; 100]; % 3场景 × 1指标

% 容载量（Veh/h）（用于计算饱和度 M₃）

capacity_opens = [600; 600; 600]; % 3场景 × 1指标

% 两点间位移（Km）（用于计算非直线系数 M₄）

displacement_opens = [3; 3; 3]; % 3场景 × 1指标

% 信号灯周期（T）和绿灯时间（tg）（用于计算运行指数 M₇）

T_opens = [90; 90; 90]; % 3场景 × 1指标

tg_opens = [36; 36; 36]; % 3场景 × 1指标

% 补充其他指标（开放后）

tci_opens = [8; 7.5; 6.8]; % 3场景 × 1

recovery_time_opens = [30; 25; 20]; % 3场景 × 1

emergency_cost_opens = [100; 90; 80]; % 3场景 × 1

% ========== 标准化 ==========

types = {'benefit', 'benefit', 'cost', 'cost', 'benefit', 'cost', 'cost', 'cost', 'cost'};

data_opens_standardized = zeros(size(data_opens,1), 9); % 3×9

% 1. 交通流量（M₁）标准化

data_opens_standardized(:,1) = normalize_data(data_opens, types{1});

% 2. 行程车速（M₂）标准化

data_opens_standardized(:,2) = normalize_data(speed_opens, 'benefit');

% 3. 饱和度（M₃）标准化

saturation_opens = data_opens ./ capacity_opens;

data_opens_standardized(:,3) = normalize_data(saturation_opens, 'cost');

% 4. 非直线系数（M₄）标准化

data_opens_standardized(:,4) = normalize_data(displacement_opens, 'cost');

% 5. 运行指数（M₇）标准化

run_index_opens = tg_opens ./ T_opens;

data_opens_standardized(:,7) = normalize_data(run_index_opens, 'cost');

% 6. TCI（M₆）标准化

data_opens_standardized(:,6) = normalize_data(tci_opens, 'cost');

% 7. 应急恢复时间（M₈）标准化

data_opens_standardized(:,8) = normalize_data(recovery_time_opens, 'cost');

% 8. 应急成本（M₉）标准化

data_opens_standardized(:,9) = normalize_data(emergency_cost_opens, 'cost');

% ========== 计算CTI ==========

weights = [0.1753, 0.0819, 0.0429, 0.0241, 0.0771, 0.2831, 0.3156, 0.1532, 0.0718];

CTI_opens = sum(repmat(weights, size(data_opens_standardized,1), 1) .* data_opens_standardized, 2);

% ========== 输入开放前数据 ==========

% 平衡车辆分布（M₁）开放前

data_closes = [100; 100; 100]; % 3场景 × 1指标

% 行程车速（M₂）开放前

speed_closes = [100; 100; 100]; % 3场景 × 1指标

% 容载量（M₃）开放前（与开放后相同）

capacity_closes = capacity_opens;

% 两点间位移（M₄）开放前

displacement_closes = [3; 3; 3]; % 3场景 × 1指标

% 信号灯周期（T）和绿灯时间（tg）开放前

T_closes = T_opens;

tg_closes = tg_opens;

% 其他指标开放前

tci_closes = [9; 8.5; 7.5]; % 3场景 × 1

recovery_time_closes = [40; 35; 30]; % 3场景 × 1

emergency_cost_closes = [120; 110; 100]; % 3场景 × 1

% ========== 标准化开放前数据 ==========

data_closes_standardized = zeros(size(data_closes,1), 9); % 3×9

% 1. 交通流量（M₁）标准化

data_closes_standardized(:,1) = normalize_data(data_closes, types{1});

% 2. 行程车速（M₂）标准化

data_closes_standardized(:,2) = normalize_data(speed_closes, 'benefit');

% 3. 饱和度（M₃）标准化

saturation_closes = data_closes ./ capacity_closes;

data_closes_standardized(:,3) = normalize_data(saturation_closes, 'cost');

% 4. 非直线系数（M₄）标准化

data_closes_standardized(:,4) = normalize_data(displacement_closes, 'cost');

% 5. 运行指数（M₇）标准化

run_index_closes = tg_closes ./ T_closes;

data_closes_standardized(:,7) = normalize_data(run_index_closes, 'cost');

% 6. TCI（M₆）标准化

data_closes_standardized(:,6) = normalize_data(tci_closes, 'cost');

% 7. 应急恢复时间（M₈）标准化

data_closes_standardized(:,8) = normalize_data(recovery_time_closes, 'cost');

% 8. 应急成本（M₉）标准化

data_closes_standardized(:,9) = normalize_data(emergency_cost_closes, 'cost');

% ========== 计算开放前CTI ==========

CTI_closes = sum(repmat(weights, size(data_closes_standardized,1), 1) .* data_closes_standardized, 2);

% ========== 可视化对比 ==========

figure;

bar([CTI_closes, CTI_opens]);

set(gca, 'XTickLabel', {'1', '2', '3'}, 'XTick', 1:3);

legend('开放前', '开放后');

xlabel('场景编号');

ylabel('综合交通指数 (CTI)');

title('开放前后CTI对比');

grid on;

% ========== 指标分解 ==========

contributions_opens = repmat(weights, size(data_opens_standardized,1), 1) .* data_opens_standardized;

contributions_closes = repmat(weights, size(data_closes_standardized,1), 1) .* data_closes_standardized;

figure;

bar([contributions_closes, contributions_opens]);

legend('开放前', '开放后');

xlabel('场景编号');

ylabel('指标贡献度');

title('各指标对CTI的贡献分解');

grid on;

% ========== 变化率热力图 ==========

change_rate_per_metric = [-90, -50, 0, 30, 70; ...

-80, -40, 10, 40, 90; ...

-60, -20, 20, 50, 100];

figure;

h = imagesc(change_rate_per_metric);

colormap(jet);

colorbar;

xlabel('指标编号');

ylabel('场景编号');

title('开放前后指标变化率热力图');

clim([-100 100]);

cb = colorbar;

cb.Ticks = [-100 -50 0 50 100];

cb.TickLabels = {'-100%', '-50%', '0%', '50%', '100%'};

grid on;

set(gca, 'XTick', 1:size(change_rate_per_metric,2), ...

'YTick', 1:size(change_rate_per_metric,1));

% ========== 标准化函数 ==========

function M_star = normalize_data(data, type)

min_val = min(data(:));

max_val = max(data(:));

if strcmp(type, 'benefit')

M_star = (data - min_val) ./ (max_val - min_val);

else

M_star = 1 - (data - min_val) ./ (max_val - min_val);

end

M_star(isnan(M_star)) = 0;

end
```
开放前后CTI对比：
![[屏幕截图 2025-07-17 095632.png]]

各指标对CTI的贡献分解：
![[屏幕截图 2025-07-17 095620.png]]

开放前后指标变化率热力图：
![[屏幕截图 2025-07-17 095606.png]]
